<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de CURP y RFC</title>
</head>
<body>
    <h1>Generador de CURP y RFC</h1>
    <form id="curpRfcForm">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" required><br>

        <label for="apellido1">Primer Apellido:</label>
        <input type="text" id="apellido1" required><br>

        <label for="apellido2">Segundo Apellido:</label>
        <input type="text" id="apellido2"><br>

        <label for="fechaNacimiento">Fecha de Nacimiento (YYYY-MM-DD):</label>
        <input type="date" id="fechaNacimiento" required><br>

        <label for="sexo">Sexo:</label>
        <select id="sexo" required>
            <option value="">Seleccione</option>
            <option value="H">Hombre</option>
            <option value="M">Mujer</option>
        </select><br>

        <button type="button" onclick="generarCURP()">Generar CURP</button>
        <button type="button" onclick="generarRFC()">Generar RFC</button>
    </form>

    <h2>CURP Generada:</h2>
    <p id="resultadoCURP"></p>

    <h2>RFC Generado:</h2>
    <p id="resultadoRFC"></p>

    <script>
        function obtenerPrimeraVocalInterna(apellido) {
            const vocales = 'AEIOU';
            for (let i = 1; i < apellido.length; i++) {
                if (vocales.includes(apellido[i].toUpperCase())) {
                    return apellido[i].toUpperCase();
                }
            }
            return '';
        }

        function obtenerConsonantesInternas(apellido) {
            const consonantes = 'BCDFGHJKLMNPQRSTVWXYZ';
            let resultado = '';
            for (let i = 1; i < apellido.length; i++) {
                if (consonantes.includes(apellido[i].toUpperCase())) {
                    resultado += apellido[i].toUpperCase();
                }
            }
            return resultado;
        }

        function generarCURP() {
            const nombre = document.getElementById('nombre').value.trim();
            const apellido1 = document.getElementById('apellido1').value.trim();
            const apellido2 = document.getElementById('apellido2').value.trim();
            const fechaNacimiento = new Date(document.getElementById('fechaNacimiento').value);
            const sexo = document.getElementById('sexo').value;
            const entidad = 'DF'; // Puedes modificar esto para incluir una selección de entidad

            // 1. Iniciales
            const inicialApellido1 = apellido1.charAt(0).toUpperCase();
            const inicialApellido2 = apellido2.charAt(0).toUpperCase();
            const inicialNombre = nombre.charAt(0).toUpperCase();
            const primeraVocalInternaApellido1 = obtenerPrimeraVocalInterna(apellido1);

            // 2. Fecha de nacimiento
            const añoNacimiento = fechaNacimiento.getFullYear().toString().slice(-2);
            const mesNacimiento = ('0' + (fechaNacimiento.getMonth() + 1)).slice(-2);
            const diaNacimiento = ('0' + fechaNacimiento.getDate()).slice(-2);

            // 3. Sexo
            const sexoCURP = sexo;

            // 4. Entidad federativa
            const entidadFederativa = entidad;

            // 5. Primeras consonantes internas
            const consonantesApellido1 = obtenerConsonantesInternas(apellido1);
            const consonantesApellido2 = obtenerConsonantesInternas(apellido2);
            const consonantesNombre = obtenerConsonantesInternas(nombre);

            // 6. Homoclave (no se utiliza en CURP)
            const homoclaveCURP = Math.floor(Math.random() * 100); // Homoclave simple

            // 7. Digito verificador (no se utiliza en CURP)
            const digitoVerificadorCURP = Math.floor(Math.random() * 10); // Ejemplo simple

            // Construcción de la CURP
            let curpFinal =
                inicialApellido1 +
                primeraVocalInternaApellido1 +
                inicialApellido2 +
                inicialNombre +
                añoNacimiento +
                mesNacimiento +
                diaNacimiento +
                sexoCURP +
                entidadFederativa +
                consonantesApellido1.charAt(0) +
                consonantesApellido2.charAt(0) +
                consonantesNombre.charAt(0) +
                homoclaveCURP.toString().padStart(2, '0') + 
                digitoVerificadorCURP;

            document.getElementById('resultadoCURP').innerText = curpFinal;
        }

        function generarRFC() {
            const nombre = document.getElementById('nombre').value.trim();
            const apellido1 = document.getElementById('apellido1').value.trim();
            const apellido2 = document.getElementById('apellido2').value.trim();
            const fechaNacimiento = new Date(document.getElementById('fechaNacimiento').value);

            // Iniciales
            const inicialApellido1RFC = apellido1.charAt(0).toUpperCase();
            const inicialApellido2RFC = apellido2.charAt(0).toUpperCase();
            const inicialNombreRFC = nombre.charAt(0).toUpperCase();

            // Fecha de nacimiento
            const añoNacimientoRFC = fechaNacimiento.getFullYear().toString().slice(-2);
            const mesNacimientoRFC = ('0' + (fechaNacimiento.getMonth() + 1)).slice(-2);
            const diaNacimientoRFC = ('0' + fechaNacimiento.getDate()).slice(-2);

            // Construcción del RFC
            let rfcFinal =
                inicialApellido1RFC +
                obtenerConsonantesInternas(apellido1).charAt(0) +
                inicialApellido2RFC +
                inicialNombreRFC +
                añoNacimientoRFC +
                mesNacimientoRFC +
                diaNacimientoRFC;

            document.getElementById('resultadoRFC').innerText = rfcFinal;
        }
    </script>
</body>
</html>